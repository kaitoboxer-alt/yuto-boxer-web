<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YUTO BOXER - ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒœã‚¯ã‚·ãƒ³ã‚°ï¼†ãƒ—ãƒ­ãƒ¬ã‚¹ã‚¢ãƒ¼ãƒˆ</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    /* =========================================
       ã‚µã‚¤ãƒˆå…¨ä½“ã®åŸºæœ¬ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆTOPãƒšãƒ¼ã‚¸ç”¨ï¼‰
       ========================================= */
    body {
      font-family: 'Noto Sans JP', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
      color: #333;
    }
    header {
      background-color: #002244;
      color: white;
      padding: 50px 20px;
      text-align: center;
      background-image: linear-gradient(135deg, #002244 0%, #0056b3 100%);
    }
    header h1 {
      margin: 0;
      font-size: 36px;
      letter-spacing: 2px;
    }
    header p {
      margin: 10px 0 0;
      font-size: 16px;
      opacity: 0.9;
    }
    main {
      max-width: 1000px;
      margin: 50px auto;
      padding: 0 20px;
      text-align: center;
    }

    /* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä»Šå¾Œã®ä½œå“å±•ç¤ºç”¨ï¼‰ */
    .gallery-section {
      margin-bottom: 60px;
    }
    .gallery-section h2 {
      font-size: 28px;
      color: #002244;
      margin-bottom: 20px;
    }
    .gallery-grid {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .gallery-item {
      background: white;
      width: 300px;
      height: 200px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      border: 2px dashed #ccc;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»Q&A ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .action-section {
      background: white;
      padding: 50px 30px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    .action-section h2 {
      margin-top: 0;
      color: #ff4500;
    }
    .btn-open {
      background-color: #ff4500;
      color: white;
      border: none;
      padding: 20px 40px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.2s;
      box-shadow: 0 6px 15px rgba(255, 69, 0, 0.3);
      margin-top: 20px;
    }
    .btn-open:hover {
      transform: translateY(-2px);
      background-color: #e63e00;
    }
    
    footer {
      text-align: center;
      padding: 30px;
      background: #222;
      color: #aaa;
      margin-top: 50px;
      font-size: 14px;
    }

    /* =========================================
       ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼†Q&Aæ©Ÿèƒ½ï¼‰
       ========================================= */
    #messageWindow {
      display: none; /* åˆæœŸçŠ¶æ…‹ã¯çµ¶å¯¾ã«éè¡¨ç¤º */
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.75);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }
    .window-content {
      background-color: white;
      padding: 30px;
      border-radius: 16px;
      width: 90%;
      max-width: 750px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    .btn-close {
      position: absolute;
      top: 15px; right: 20px;
      font-size: 32px;
      cursor: pointer;
      color: #aaa;
      border: none;
      background: none;
      transition: color 0.2s;
    }
    .btn-close:hover { color: #333; }
    
    .canvas-container {
      margin-bottom: 20px;
      border-radius: 12px;
      overflow: hidden;
      background: #f0f0f0;
    }
    canvas {
      width: 100%;
      height: auto;
      display: block;
    }
    
    textarea {
      width: 100%; box-sizing: border-box; height: 100px; padding: 15px;
      font-size: 16px; border: 2px solid #ddd; border-radius: 8px;
      font-family: inherit; resize: vertical; margin-bottom: 15px;
      transition: border-color 0.2s;
    }
    textarea:focus { border-color: #0056b3; outline: none; }
    
    .buttons {
      display: flex; justify-content: center; gap: 12px; margin-bottom: 30px; flex-wrap: wrap;
    }
    .buttons button {
      background-color: #0056b3; color: white; border: none; padding: 12px 24px;
      font-size: 15px; font-weight: bold; border-radius: 8px; cursor: pointer;
      transition: background-color 0.2s;
    }
    .buttons button:hover { background-color: #003d82; }
    .buttons .btn-download { background-color: #ff8c00; }
    .buttons .btn-download:hover { background-color: #e67e00; }
    
    .btn-submit {
      background-color: #28a745; width: 100%; padding: 16px; font-size: 18px;
      color: white; border: none; font-weight: bold; border-radius: 8px;
      cursor: pointer; transition: background-color 0.2s;
    }
    .btn-submit:hover { background-color: #218838; }
    
    hr { margin: 30px 0; border: 0; border-top: 1px solid #eee; }

    .reply-notice {
      font-size: 13px;
      color: #555;
      margin-top: 15px;
      text-align: left;
      line-height: 1.6;
      background-color: #f8f9fa;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #eee;
    }
    .reply-notice a {
      color: #1da1f2; /* X(Twitter)ã£ã½ã„é’è‰² */
      text-decoration: none;
      font-weight: bold;
    }
    .reply-notice a:hover {
      text-decoration: underline;
    }

  </style>
</head>
<body>

  <header>
    <h1>YUTO BOXER</h1>
    <p>ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒœã‚¯ã‚·ãƒ³ã‚°ï¼†ãƒ—ãƒ­ãƒ¬ã‚¹ ã‚¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹</p>
  </header>

  <main>
    
    <section class="gallery-section">
      <h2>Gallery / Characters</h2>
      <p>Kaitoã‚„ChrisãŸã¡ã®ç†±ã„é—˜ã„ã‚„ã€B.B.PWã®ä¸–ç•Œè¦³ã‚’ã“ã“ã§ãŠå±Šã‘ã—ã¾ã™ã€‚</p>
      <div class="gallery-grid">
        <div class="gallery-item">ä½œå“ç”»åƒ 1</div>
        <div class="gallery-item">ä½œå“ç”»åƒ 2</div>
        <div class="gallery-item">B.B.PW ãƒ™ãƒ«ãƒˆ</div>
      </div>
    </section>

    <section class="action-section">
      <h2>Fan Message & Q&A</h2>
      <p>ãƒ•ã‚¡ãƒ³ã‹ã‚‰ã®å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„è³ªå•ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚<br>ã„ãŸã ã„ãŸè³ªå•ã¯ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŸã¡ãŒç”»åƒä»˜ãã§ãŠç­”ãˆã™ã‚‹ã‹ã‚‚ï¼ï¼Ÿ</p>
      
      <button class="btn-open" onclick="openWindow()">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»è³ªå•ã‚’é€ã‚‹ âœ‰ï¸</button>
    </section>

  </main>

  <footer>
    &copy; 2026 yuto-boxer.com All Rights Reserved.
  </footer>

  <div id="messageWindow" style="display: none;">
    <div class="window-content">
      <button class="btn-close" onclick="closeWindow()">Ã—</button>
      
      <h2>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ</h2>
      <div class="canvas-container">
        <canvas id="myCanvas" width="1280" height="720"></canvas>
      </div>
      
      <textarea id="cardInput" placeholder="ã‚«ãƒ¼ãƒ‰ã«æ›¸ãè¾¼ã‚€ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ï¼ˆè‡ªå‹•ã§ã‚µã‚¤ã‚ºèª¿æ•´ã•ã‚Œã¾ã™ï¼‰">ã„ã¤ã‚‚å¿œæ´ã‚ã‚ŠãŒã¨ã†ï¼</textarea>
      <div class="buttons">
        <button onclick="changeRandomCard()">ã‚­ãƒ£ãƒ©ã‚’å¤‰ãˆã‚‹ğŸ²</button>
        <button onclick="drawCard()">æ–‡å­—ã‚’åæ˜ ã™ã‚‹ğŸ–Šï¸</button>
        <button class="btn-download" onclick="downloadCard()">ç”»åƒã‚’ä¿å­˜ã™ã‚‹ğŸ’¾</button>
      </div>

      <hr>

     <h2>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»è³ªå•ã‚’é€ã‚‹</h2>
      <form id="myForm" action="https://formspree.io/f/xeelvqye" method="POST">
        <textarea name="message" required placeholder="ã“ã“ã«ç›´æ¥å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„è³ªå•ã‚’æ›¸ã„ã¦é€ä¿¡ã§ãã¾ã™ï¼"></textarea>
        <button type="submit" class="btn-submit">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ ğŸš€</button>

        <div class="reply-notice">
          â€»ãŠè¿”äº‹ã§ãã‚‹ã¨ãã¯Xï¼ˆæ—§Twitterï¼‰ã® <a href="https://x.com/boxer_yuto" target="_blank" rel="noopener noreferrer">@boxer_yuto</a> ã‹ã‚‰ã«ãªã‚Šã¾ã™ã€‚<br>
          * Replies, when possible, will be sent via X (formerly Twitter) <a href="https://x.com/boxer_yuto" target="_blank" rel="noopener noreferrer">@boxer_yuto</a>.<br>
          * å¦‚èƒ½å›å¤ï¼Œå°†é€šè¿‡ Xï¼ˆåŸ Twitterï¼‰<a href="https://x.com/boxer_yuto" target="_blank" rel="noopener noreferrer">@boxer_yuto</a> è¿›è¡Œå›å¤ã€‚<br>
          * ë‹µì¥ì´ ê°€ëŠ¥í•œ ê²½ìš° X(êµ¬ Twitter) <a href="https://x.com/boxer_yuto" target="_blank" rel="noopener noreferrer">@boxer_yuto</a> ë¥¼ í†µí•´ ë‹µë³€í•´ ë“œë¦½ë‹ˆë‹¤.
        </div>
        </form>
    </div>
  </div>
  <script>
    // --- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ã®é–‹é–‰å‡¦ç† ---
    function openWindow() {
      document.getElementById('messageWindow').style.display = 'flex';
      changeRandomCard(); // é–‹ã„ãŸæ™‚ã«ãƒ©ãƒ³ãƒ€ãƒ ã§ã‚«ãƒ¼ãƒ‰ã‚’ã‚»ãƒƒãƒˆ
    }
    
    function closeWindow() {
      document.getElementById('messageWindow').style.display = 'none';
    }

    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å¤–å´ï¼ˆé»’ã„èƒŒæ™¯éƒ¨åˆ†ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚é–‰ã˜ã‚‹ã‚ˆã†ã«ã™ã‚‹ä¾¿åˆ©æ©Ÿèƒ½
    window.addEventListener('click', function(e) {
      const modal = document.getElementById('messageWindow');
      if (e.target === modal) {
        closeWindow();
      }
    });

    // --- ã‚­ãƒ£ãƒ³ãƒã‚¹ï¼ˆç”»åƒåˆæˆï¼‰ã®å‡¦ç† ---
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');
    const cardInput = document.getElementById('cardInput');
    let currentCardNumber = 1;
    let currentImage = new Image();

    function changeRandomCard() {
      // 1ã€œ20ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å­—ã‚’ç”Ÿæˆ
      currentCardNumber = Math.floor(Math.random() * 20) + 1;
      const paddedNum = String(currentCardNumber).padStart(2, '0');
      // â˜…ç”»åƒURLã®è¨­å®š
      const imageUrl = `https://media.yuto-boxer.com/card/card_${paddedNum}.png`;

      currentImage = new Image();
      currentImage.crossOrigin = "anonymous"; 
      currentImage.onload = () => drawCard();
      currentImage.src = imageUrl + "?t=" + new Date().getTime(); // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å›é¿
    }

    function drawCard() {
      // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢ã—ã¦èƒŒæ™¯ç”»åƒã‚’æç”»
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);

      const text = cardInput.value;
      if (text.trim() !== "") {
        // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®æç”»ç¯„å›²ï¼ˆç”»åƒã«åˆã‚ã›ã¦å¾®èª¿æ•´å¯èƒ½ï¼‰
        const textArea = { x: 130, y: 160, width: 660, height: 420 };
        drawTextWithAutoScale(ctx, text, textArea);
      }
    }

    function drawTextWithAutoScale(ctx, text, area) {
      let fontSize = 54;
      const minFontSize = 24;
      const fontFamily = "'Noto Sans JP', sans-serif";
      const lineHeightRatio = 1.4;
      let lines = [];
      let wrappedText = text.replace(/\r\n/g, '\n');
      
      while (fontSize >= minFontSize) {
        ctx.font = `bold ${fontSize}px ${fontFamily}`;
        lines = wrapText(ctx, wrappedText, area.width);
        let totalHeight = lines.length * (fontSize * lineHeightRatio);
        if (totalHeight <= area.height) break; // æ ã«åã¾ã‚Œã°ãƒ«ãƒ¼ãƒ—çµ‚äº†
        fontSize -= 2; // åã¾ã‚‰ãªã‘ã‚Œã°ç¸®å°
      }

      ctx.fillStyle = "#333333";
      ctx.textBaseline = "top";
      const totalTextHeight = lines.length * (fontSize * lineHeightRatio);
      // ç¸¦æ–¹å‘ã®ä¸­å¤®ã«é…ç½®
      const startY = area.y + (area.height - totalTextHeight) / 2;

      lines.forEach((line, index) => {
        const textY = startY + index * (fontSize * lineHeightRatio);
        ctx.fillText(line, area.x, textY);
      });
    }

    function wrapText(ctx, text, maxWidth) {
      const chars = text.split('');
      let lines = [];
      let currentLine = '';
      for (let i = 0; i < chars.length; i++) {
        const char = chars[i];
        if (char === '\n') {
          lines.push(currentLine); currentLine = ''; continue;
        }
        const testLine = currentLine + char;
        if (ctx.measureText(testLine).width > maxWidth && currentLine !== '') {
          lines.push(currentLine); currentLine = char;
        } else {
          currentLine = testLine;
        }
      }
      lines.push(currentLine);
      return lines;
    }

    function downloadCard() {
      drawCard();
      const link = document.createElement('a');
      link.download = `QA_card_${new Date().getTime()}.png`;
      link.href = canvas.toDataURL("image/png");
      link.click();
    }

    // --- Formspree éåŒæœŸé€ä¿¡ï¼ˆç”»é¢é·ç§»ãªã—ï¼‰ã®å‡¦ç† ---
    const form = document.getElementById('myForm');
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç”»é¢é·ç§»ã‚’ãƒ–ãƒ­ãƒƒã‚¯
      const formData = new FormData(form);

      fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { 'Accept': 'application/json' }
      })
      .then(response => {
        if (response.ok) {
          alert("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼");
          form.reset(); // ãƒ•ã‚©ãƒ¼ãƒ ã®ä¸­èº«ã‚’ç©ºã«ã™ã‚‹
          closeWindow(); // é€ä¿¡æˆåŠŸå¾Œã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹
        } else {
          response.json().then(data => {
            if (Object.hasOwn(data, 'errors')) {
              alert(data["errors"].map(error => error["message"]).join(", "));
            } else {
              alert("é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
            }
          });
        }
      })
      .catch(error => alert("é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"));
    });
  </script>
</body>
</html>