<div class="card">
    <h2>Gallery Manager (4 Works)</h2>
    <label>GitHub Token</label>
    <input type="password" id="token" placeholder="ghp_xxx">

    <label>横 01: タイトル / 解説</label>
    <input type="text" id="t01"> <textarea id="d01" rows="1"></textarea>

    <label>横 02: タイトル / 解説</label>
    <input type="text" id="t02"> <textarea id="d02" rows="1"></textarea>

    <label>横 03: タイトル / 解説</label>
    <input type="text" id="t03"> <textarea id="d03" rows="1"></textarea>

    <label>縦 11: タイトル / 解説</label>
    <input type="text" id="t11"> <textarea id="d11" rows="1"></textarea>

    <button onclick="sendUpdate()">4枚一括更新を実行</button>
    <div id="status"></div>
</div>

<script>
async function sendUpdate() {
    const token = document.getElementById('token').value;
    const status = document.getElementById('status');
    if(!token) return alert("トークンが必要です");

    status.innerText = "GitHubへ送信中...";

    const payload = {
        event_type: "update-gallery",
        client_payload: {
            t01: document.getElementById('t01').value, d01: document.getElementById('d01').value,
            t02: document.getElementById('t02').value, d02: document.getElementById('d02').value,
            t03: document.getElementById('t03').value, d03: document.getElementById('d03').value,
            t11: document.getElementById('t11').value, d11: document.getElementById('d11').value
        }
    };

    const res = await fetch('https://api.github.com/repos/kaitoboxer-alt/yuto-boxer-web/dispatches', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${token}`, 'Accept': 'application/vnd.github.v3+json' },
        body: JSON.stringify(payload)
    });

    status.innerText = res.ok ? "✅ 成功！1分ほどお待ちください" : "❌ 送信失敗";
}
</script>